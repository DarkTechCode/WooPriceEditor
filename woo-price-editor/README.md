# Редактор цен WooCommerce

Мощный WordPress плагин для массового редактирования цен и характеристик товаров WooCommerce с полноэкранным интерфейсом.

## Описание

Редактор цен WooCommerce предоставляет специализированный полноэкранный интерфейс для эффективного управления товарами WooCommerce. Плагин включает встроенное редактирование, расширенную фильтрацию, операции с множеством товаров и обновление данных в реальном времени.

## Требования

- **WordPress**: 6.0 или выше
- **PHP**: 7.4 или выше
- **WooCommerce**: 3.0 или выше
- **Право пользователя**: `manage_woocommerce` (как правило, администратор или менеджер магазина)

## Совместимость

- **WordPress**: протестирован до версии 6.4
- **WooCommerce**: совместим с последними стабильными версиями
- **PHP**: 7.4, 8.0, 8.1, 8.2
- **Браузеры**: современные браузеры (Chrome, Firefox, Safari, Edge — последние 2 версии)

## Установка

Подробные инструкции по установке смотрите в [`docs/installation.md`](docs/installation.md).

**Быстрая установка**:

1. Загрузите каталог `woo-price-editor` в `/wp-content/plugins/`
2. Активируйте плагин через меню **Плагины** в WordPress
3. Перейдите на **Редактор цен** в меню администратора
4. Настройте параметры в **Редактор цен** → **Настройки**

## Возможности

### Встроенное редактирование
- Нажмите на любое поле для редактирования прямо в таблице
- Автосохранение при потере фокуса (цены, выпадающие списки)
- Клавиши Enter/Escape для поля названия товара
- Проверка данных в реальном времени и сообщения об ошибках

### Расширенная фильтрация
- Фильтрация по категориям товаров
- Фильтрация по статусу (Опубликовано, Черновик, Приватное, В ожидании)
- Фильтрация по налоговому статусу (Подлежит налогообложению, Только доставка, Нет налога)
- Фильтрация по статусу наличия (В наличии, Нет в наличии, На заказ)
- Полнотекстовый поиск (название, артикул, ID)

### Настраиваемые колонки
- Показать/скрыть колонки по необходимости
- Настраиваемые колонки по умолчанию
- Сохранение предпочтений видимости колонок

### Полноэкранный интерфейс
- Рабочая среда без отвлекающих элементов
- Максимальное пространство экрана для таблицы товаров
- Адаптивный дизайн для различных размеров экрана

### Безопасность
- Управление доступом на основе прав
- Защита от CSRF через nonce
- Санитизация и проверка входящих данных
- Логирование операций для аудита безопасности

## Структура плагина

```
woo-price-editor/
├── assets/
│   ├── css/
│   │   ├── editor.css          # Основные стили редактора
│   │   └── settings.css        # Стили страницы настроек
│   └── js/
│       └── editor.js           # Frontend JavaScript
├── docs/
│   ├── installation.md         # Руководство по установке
│   ├── capabilities.md         # Справочник прав доступа
│   ├── settings.md            # Документация по настройкам
│   ├── ajax-endpoints.md      # Документация AJAX API
│   └── technical-notes.md     # Технические детали реализации
├── includes/
│   ├── class-wpe-plugin.php   # Основной класс плагина
│   ├── class-wpe-ajax.php     # AJAX обработчики
│   ├── class-wpe-api.php      # REST API конечные точки
│   ├── class-wpe-product.php  # Обработчики данных товаров
│   ├── class-wpe-security.php # Утилиты безопасности
│   └── class-wpe-settings.php # Страница настроек
├── templates/
│   └── editor-shell.php       # Полноэкранный шаблон редактора
├── tests/
│   ├── bootstrap.php          # Инициализация тестов
│   ├── phpunit.xml.dist       # Конфигурация PHPUnit
│   ├── README.md              # Документация по тестам
│   ├── test-option-defaults.php
│   └── test-ajax-permissions.php
└── woo-price-editor.php       # Основной файл плагина
```

## Документация

### Для пользователей

- **[Руководство по установке](docs/installation.md)** — пошаговые инструкции по установке плагина
- **[Справочник прав доступа](docs/capabilities.md)** — информация о правах доступа и ролях пользователей
- **[Документация по настройкам](docs/settings.md)** — руководство по настройке параметров плагина
- **[Технические заметки](docs/technical-notes.md)** — технические детали реализации

### Для разработчиков

- **[AJAX API справочник](docs/ajax-endpoints.md)** — полная документация всех конечных точек AJAX API
- **[Руководство по тестам](tests/README.md)** — инструкции по запуску и написанию тестов

## Использование AJAX API

Плагин предоставляет следующие AJAX конечные точки:

### Получение категорий товаров

```javascript
jQuery.post(wpeData.ajaxUrl, {
    action: 'wpe_get_categories',
    nonce: wpeData.nonce
}, function(response) {
    // Обработка данных категорий
});
```

### Получение товаров

```javascript
jQuery.post(wpeData.ajaxUrl, {
    action: 'wpe_get_products',
    nonce: wpeData.nonce,
    category: 'electronics',
    page: 1,
    per_page: 50
}, function(response) {
    // Обработка данных товаров
});
```

### Обновление товара

```javascript
jQuery.post(wpeData.ajaxUrl, {
    action: 'wpe_update_product',
    nonce: wpeData.nonce,
    product_id: 123,
    field: 'regular_price',
    value: '99.99'
}, function(response) {
    // Обработка результата обновления
});
```

Полная документация по API доступна в [`docs/ajax-endpoints.md`](docs/ajax-endpoints.md).

## Локализация

Плагин полностью локализирован:

- ✓ Все текстовые строки интерфейса администратора на русском языке
- ✓ Весь текст в редакторе цен на русском языке
- ✓ Все сообщения об ошибках на русском языке
- ✓ Вся документация переведена на русский язык

## Требования к разработчикам

### Для локального развития

1. Убедитесь, что у вас установлены WordPress, WooCommerce и PHP 7.4+
2. Отредактируйте код с соблюдением соглашений о кодировании WordPress
3. Используйте текстовый домен `woo-price-editor` для всех строк, подлежащих переводу
4. Запустите тесты перед отправкой изменений

### Запуск тестов

```bash
cd tests
phpunit
```

Подробные инструкции смотрите в [`tests/README.md`](tests/README.md).

## Архитектурные преимущества

### Модульный JavaScript

- **Поддерживаемость**: каждый модуль имеет четкую ответственность
- **Читаемость**: код разбит на логические части
- **Расширяемость**: легко добавлять новые функции
- **Тестируемость**: каждый модуль можно тестировать отдельно

### Чистая архитектура PHP

- Классы следуют принципам SOLID
- Разделение ответственности между классами
- Легко расширяемая структура
- Хорошее покрытие тестами

## Совместимость

### WordPress Hooks и Filters

Плагин использует стандартные WordPress хуки:

- `admin_menu` — регистрация пункта меню
- `admin_init` — инициализация администратора
- `admin_enqueue_scripts` — подключение скриптов и стилей
- `wp_ajax_{action}` — обработка AJAX запросов

### Интеграция с WooCommerce

- Использует WooCommerce функции для получения и обновления данных товаров
- Совместим с пользовательскими метаполями
- Поддерживает все типы товаров WooCommerce

## Лицензирование и поддержка

Для информации о лицензии смотрите файл LICENSE в корневом каталоге репозитория.

## Участие в разработке

Приветствуются предложения по улучшению и отчеты об ошибках. Пожалуйста, убедитесь, что все тесты проходят перед отправкой PR.
